<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Onii CLI â€” Elegant Anime CLI Tool for Termux" />
  <title>Onii CLI â€” Elegant Anime CLI</title>
  <link rel="icon" href="https://onii-cli.oniisama.com/icon.png">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
    :root {
      --black: #101014;
      --black-velvet: #18171d;
      --card-bg: rgba(24,23,29,0.98);
      --glass: rgba(28,27,34,0.84);
      --border-soft: 1.5px solid #24242a;
      --gray: #adadbb;
      --gray-dark: #28282f;
      --white: #fff;
      --accent-green: #72ffc4;
      --divider: linear-gradient(90deg,rgba(160,160,160,0.05) 0%,rgba(80,80,80,0.58) 48%,rgba(180,180,180,0.08) 100%);
    }
    body {
      background: linear-gradient(120deg, #141417, #1b1c23);
      color: var(--white);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      overflow-x: hidden;
      letter-spacing: 0.005em;
    }
    #particles { display:none; }
    header { text-align: center; padding: 84px 20px 64px; position:relative; z-index:2; }
    .logo-glass {
      display:inline-block;
      padding:2.5rem 5rem;
      border-radius:2.3rem;
      background:var(--glass);
      box-shadow:0 0 30px 0 #0009,0 2px 8px #20202444;
      border:var(--border-soft);
    }
    h1 {
      font-size:3.3rem; font-weight:700;
      color:var(--white);
      text-shadow:0 2px 32px #0009, 0 1px 2px #fff1;
      letter-spacing:2.5px; margin-bottom:.5rem;
    }
    p.subtitle {
      color:#d6d6d6;
      margin:18px auto 32px; max-width:720px;
      font-size:1.13rem; line-height:1.7;
      text-shadow:0 2px 10px #101014ba;
    }
    .divider {
      width:160px;margin:20px auto 33px;height:3px;
      border-radius:2px; background:var(--divider);
    }
    .buttons {
      display: flex;
      flex-wrap: wrap;
      flex-direction: row;
      justify-content: center;
      gap: 0;
      margin-bottom: 7px;
    }
    .btn {
      display: block;
      margin-bottom: 16px;
    }
    .btn:last-child {
      margin-bottom: 0;
    }
    @media (max-width: 700px) {
      .buttons { flex-direction: column; align-items: center; }
      .btn { width: 100%; max-width: 350px; }
    }
    .glass-section {
      max-width:820px; margin:52px auto 0;
      border-radius:19px; padding:48px 36px 36px 36px;
      background:var(--card-bg);
      box-shadow:0 0 30px 8px #10101460, 0 2px 12px #20202444;
      border:var(--border-soft);
      position:relative;z-index:2;
      text-align:left;
    }
    .glass-section h2 {
      font-size:2.1rem;margin-bottom:17px;
      color:#eaeaea;text-shadow:0 2px 10px #23232c56;
      font-weight:600;
    }
    .install-steps {
      display:flex;flex-direction:column;gap:37px;margin-top:3px;margin-bottom:19px; }
    .install-step {
      display:flex;align-items:flex-start;gap:17px;
      background:rgba(37,37,45,0.43); padding:14px 20px;
      border-radius:12px; border:var(--border-soft);
      box-shadow:0 2px 22px 0 #18182222;
    }
    .step-num {
      flex-shrink:0; background:var(--gray-dark); color:var(--white);
      font-weight:700; font-size:1.07rem;
      width:38px; height:38px; border-radius:50%;
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 0 19px #000b,0 1px 3px #191a1e2a;
      margin-top:2px;
    }
    .step-body { flex:1; }
    .step-title {
      color:#f4f4f4; font-weight:600; font-size:1.08rem; margin-bottom:3px;
    }
    .step-cmd {
      font-family:monospace;font-size:1.01rem;background:#16171a;
      border-radius:7px; padding:7.5px 15px 7.5px 15px;
      color:#dbfbff; margin-bottom:5px; position:relative;
      border:1px solid #292934;
      overflow-x:auto;
    }
    .cmd-copy-btn {
      position:absolute;right:8px;top:7px; border:0;
      background:#24242a; color:#fff; border-radius:5px;
      padding:2px 8px; font-size:0.80rem; cursor:pointer;
      opacity:.7; transition:opacity 0.15s;
    }
    .cmd-copy-btn:hover { opacity:1; background: #18181d; }
    .step-explanation {
      font-size:0.99rem;color:#bcc3c9;opacity:0.93;
      margin-top:0px;margin-bottom:2px;padding-left:3px;}
    .terminal {
      background:rgba(22,22,28,0.97);
      padding:36px 23px; border-radius:16px;
      text-align:left; font-family:monospace;
      color:#e8f9fb; box-shadow:0 0 35px #000d,0 2px 12px #10101421;
      max-width:700px; margin:0 auto 18px auto; overflow:hidden; height:184px; position:relative;
      border:1.5px solid #191a1e;
    }
    .terminal-green { color: #72ffc4; }
    .terminal-gray { color: #a8adb7; }
    .terminal-err { color:#fa7e7e; }
    .terminal-cmd { color: #f4f4f4; }
    .cursor { display:inline-block;width:11px; background:#b2fff5; animation: blink 1s infinite; }
    @keyframes blink { 50% { opacity: 0; } }
    footer {
      text-align:center; color:#787c86;
      margin-top:84px; font-size:1.03rem;
      padding-bottom:34px; letter-spacing:0.01em;
    }
    footer a { color:#adadbb;text-decoration:none;font-weight:600;}
    @media (max-width:700px) {
      .glass-section { padding:15px 4vw; }
      header { padding-top:55px; }
      h1 { font-size:2.0rem; }
      .terminal { max-width:100vw; padding:12px 2vw; font-size:0.94rem; }
      .buttons { gap:10px;}
    }
    .action-buttons {
      display: flex;
      flex-direction: row;
      justify-content: center;
      gap: 36px;
      margin: 34px 0 8px 0;
      flex-wrap: wrap;
    }
    .btn.btn-action {
      background: rgba(24,24,28,0.96);
      border-radius: 14px;
      color: #fff;
      font-size: 1.16rem;
      font-weight: 600;
      box-shadow: 0 4px 28px #1119, 0 1px 5px #23232344;
      border: 2px solid transparent;
      padding: 22px 42px;
      margin-bottom: 0; /* Inline */
      transition: 0.16s border, 0.18s box-shadow, 0.13s transform;
      text-decoration: none !important;
      min-height: 48px;
      min-width: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 0;
    }
    .btn.btn-action:hover,
    .btn.btn-action:focus {
      border: 2px solid #fff4;
      box-shadow: 0 0 20px #fff1, 0 1px 5px #ffffff33;
      transform: scale(1.025) translateY(-1px);
      text-decoration: none !important;
    }
    .btn.btn-install-step {
      font-size: 1.06rem;
      padding: 11px 0;
      border-radius: 12px;
      background: rgba(32,33,38,0.96);
      font-weight: 600;
      box-shadow: 0 2px 10px #13131933;
      border: 1.2px solid #23232d;
      color: #fff;
      text-decoration: none !important;
      transition: .13s box-shadow, .13s border, .13s background, .13s color;
      display: flex;
      align-items: center; /* vertical center */
      justify-content: center; /* horizontal center */
      width: 100%;
      max-width: 330px;
      margin: 12px auto 0 auto;
      min-height: 46px;
      text-align: center;
      overflow: hidden;
      white-space: normal;
      word-break: break-word;
      cursor: pointer;
    }
    .btn.btn-install-step:hover,
    .btn.btn-install-step:focus {
      border: 1.2px solid #fff5;
      background: #19191de0;
      color: #f0f0f0;
      box-shadow: 0 0 14px 1px #fff3;
    }
    .step-explanation .btn.btn-install-step {
      margin-top: 12px;
      margin-bottom: 4px;
      text-align: center;
    }
    @media (max-width: 700px) {
      .action-buttons {
        flex-direction: column;
        gap: 18px;
        margin: 20px 0 8px 0;
      }
      .btn.btn-action {
        width: 100%;
        max-width: 430px;
        font-size: 1.04rem;
        padding: 15px 0;
        min-width: 0;
        margin-bottom: 0;
      }
      /* Make install steps stack vertically on small screens */
      .install-step { flex-direction: column; align-items: stretch; }
      .step-num { width: 34px; height: 34px; margin-top: 0; margin-bottom: 8px; }
      /* Allow long commands to wrap instead of overflowing */
      .step-cmd {
        white-space: normal;
        word-break: break-word;
        overflow-wrap: anywhere;
        font-size: 0.98rem;
        padding: 9px 12px;
      }
      .btn.btn-install-step {
        width: 100%; max-width: 99vw; font-size: 1.01rem; min-height: 46px; padding: 12px 0;
      }
      .glass-section { padding-left: 2vw; padding-right: 2vw; }
    }
    .terminal {
      max-width: 100vw;
      overflow-x: auto;
      font-size: 0.97rem;
      box-sizing: border-box;
      word-break: break-all;
      min-width: 0;
      min-height: 300px;
      height: 310px;
      max-height: 420px;
    }
    @media (max-width: 700px) {
      .terminal {
        min-height: 220px;
        height: 240px;
        max-height: 320px;
        font-size: 0.91rem;
      }
    }
    #term-demo-caption {
      padding-left: 3px;
      padding-right: 3px;
      word-break: break-word;
      max-width: 99vw;
    }
    @media (max-width: 400px) {
      h1 { font-size: 1.4rem; }
      .btn.btn-action, .btn.btn-install-step { font-size:0.95rem; }
      .glass-section { padding: 12px 1vw 24px 1vw; }
      .terminal { font-size: 0.89rem; }
    }
    .engraved-logo {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 74px;
      height: 74px;
      margin: 0 auto 10px auto;
      border-radius: 50%;
      background: linear-gradient(145deg,#232225 70%,#171619 100%);
      box-shadow:
        0 0 0 0 #fff6,
        0 0 44px 2.5px #19191a66,
        0 3.5px 28px #23222830,
        inset 0 11px 36px #000e,
        inset 0 -4px 16px #4448,
        0 1.5px 8px #000c;
      position: relative;
      transition: box-shadow 0.18s, transform 0.16s;
      overflow: hidden;
    }
    .engraved-logo:hover, .engraved-logo:active {
      transform: scale(0.96);
      box-shadow:
        0 0 0 0 #fff7,
        0 0 65px 10px #2322283b,
        0 8px 38px #13131433,
        inset 0 16px 45px #000f,
        inset 0 -10px 44px #47484b1f,
        0 2.5px 15px #1111;
    }
    .engraved-img {
      width: 62px;
      height: 62px;
      margin: 0;
      border-radius: 50%;
      filter: grayscale(0.34) contrast(1.10) brightness(0.95) drop-shadow(0 2.5px 8px #19191e32);
      box-shadow: 0 0px 0px #000a;
      z-index: 2;
      background: transparent;
      display: block;
      transition: filter 0.17s;
    }
    .engraved-shine {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none;
      border-radius: 50%;
      background: linear-gradient(120deg,rgba(255,255,255,0.14) 23%,rgba(220,220,220,0.12) 55%,rgba(33,33,36,0.09) 84%);
      opacity: 0.46;
      mix-blend-mode: lighten;
      transform: translateX(-120%) rotate(-20deg);
      animation: logo-shine-move 2.4s cubic-bezier(.19,1,.22,1) 1s forwards;
    }
    .engraved-logo:hover .engraved-shine,
    .engraved-logo:active .engraved-shine {
      opacity: 0.72;
      animation: logo-shine-swipe 1.15s linear;
    }
    @keyframes logo-shine-move {
      0% { opacity: 0.10; transform: translateX(-120%) rotate(-20deg); }
      70% { opacity: 0.34; transform: translateX(63%) rotate(-17deg); }
      100% { opacity: 0.10; transform: translateX(160%) rotate(-13deg); }
    }
    @keyframes logo-shine-swipe {
      0% { opacity: 0.19; transform: translateX(-100%) rotate(-20deg); }
      40% { opacity: 0.77; transform: translateX(20%) rotate(-18deg); }
      70% { opacity: 0.88; transform: translateX(68%) rotate(-14deg); }
      100% { opacity: 0.10; transform: translateX(160%) rotate(-16deg); }
    }
    .engraved-noise {
      pointer-events: none;
      z-index: 3;
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="none"><filter id="n" x="0" y="0" width="100%" height="100%"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="2" seed="8"/></filter><rect width="48" height="48" fill="white" filter="url(%23n)" fill-opacity="0.07"/></svg>');
      opacity: 0.17;
      mix-blend-mode: soft-light;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-glass">
      <div class="engraved-logo">
        <img src="https://onii-cli.oniisama.com/icon2.png" alt="Onii CLI Logo" class="engraved-img">
        <span class="engraved-shine"></span>
        <span class="engraved-noise"></span>
      </div>
      <h1>Onii CLI</h1>
      <div class="divider"></div>
      <p class="subtitle">Tool for android to download anime episodes and generate download links, following with APK to download those episodes</p>
    </div>
    <div class="action-buttons">
      <a href="https://play.google.com/store/apps/details?id=com.termux&pcampaignid=web_share" class="btn btn-action">Get Termux</a>
      <a href="https://github.com/89-oniichan/oniis-cli/raw/main/Onii%20CLL.apk" class="btn btn-action" download>Download Onii CLI APK</a>
      <a href="#installation" class="btn btn-action">Installation Guide</a>
    </div>
  </header>
  <section class="glass-section" id="installation">
    <h2>Installation Steps</h2>
    <div class="install-steps">
      <div class="install-step">
        <span class="step-num">1</span>
        <div class="step-body">
          <div class="step-title">Install Termux (Android)</div>
          <div class="step-explanation">
            Download <b>Termux</b> from the Play Store.<br>
            <div style="margin-top:12px;text-align:center;width:100%;">
              <a href="https://play.google.com/store/apps/details?id=com.termux&pcampaignid=web_share" class="btn btn-install-step">Get App</a>
            </div>
            <div style="margin-top:8px;color:#84848f;font-size:0.93em;">Play Store version works for most. <u>If you have issues, F-Droid offers the latest fixes.</u></div>
          </div>
        </div>
      </div>
      <div class="install-step">
        <span class="step-num">2</span>
        <div class="step-body">
          <div class="step-title">Download Onii CLI APK</div>
          <div class="step-explanation">
            Download the <b>Onii CLI app</b> to your Android phone.<br>
            <div style="margin-top:12px;text-align:center;width:100%;">
              <a href="https://github.com/89-oniichan/oniis-cli/raw/main/Onii%20CLL.apk" class="btn btn-install-step" download>Download APK</a>
            </div>
          </div>
        </div>
      </div>
      <div class="install-step">
        <span class="step-num">3</span>
        <div class="step-body">
          <div class="step-title">Install the APK</div>
          <div class="step-explanation">
            Open your downloads, tap the APK file, and confirm install.<br>Enable &ldquo;Unknown sources&rdquo; in Settings if prompted.<br><span style="font-size:0.95em;color:#9898a1">(You may ignore Google Play warnings if you trust this tool.)</span>
          </div>
        </div>
      </div>
      <div class="install-step">
        <span class="step-num">4</span>
        <div class="step-body">
          <div class="step-title">Quick Install (Recommended)</div>
          <div class="step-explanation">
            Run this command in your Termux to automatically set up Onii CLI:
          </div>
          <div class="step-cmd" id="qicmd">curl -sL https://onii-cli.oniisama.com/install.sh | bash <button class="cmd-copy-btn" onclick="copyStep('quick')">Copy</button></div>
          <div class="step-explanation" style="color:#a6cdba;font-size:0.98em;margin-top:2px;">Recommended: Installs Onii CLI and all dependencies in one step.</div>
        </div>
      </div>
      <div class="install-step" style="background:#181822cc;">
        <span class="step-num">5</span>
        <div class="step-body">
          <div class="step-title">Manual Setup <span style="font-size:0.93em;color:#858595;">(Advanced)</span></div>
          <div class="step-explanation">If you prefer or have issues with the quick method, use these 3 commands in Termux (one-by-one):</div>
          <div class="step-cmd" id="step1cmd">echo "deb [trusted=yes] https://onii-cli.oniisama.com/repo/ ./" &gt; $PREFIX/etc/apt/sources.list.d/oniis-cli.list <button class="cmd-copy-btn" onclick="copyStep(1)">Copy</button></div>
          <div class="step-cmd" id="step2cmd">apt update <button class="cmd-copy-btn" onclick="copyStep(2)">Copy</button></div>
          <div class="step-cmd" id="step3cmd">pkg install oniis-cli <button class="cmd-copy-btn" onclick="copyStep(3)">Copy</button></div>
        </div>
      </div>
    </div>
    <div style="font-size:0.97rem; color:#b7b7bdcc; opacity:0.85; margin-top:11px; max-width:670px;">
      Need help? <a href="https://github.com/89-oniichan/onii-cli" style="color:#adadbb;">See detailed instructions on GitHub</a>
    </div>
  </section>
  <section class="glass-section" style="padding-bottom:18px;">
    <h2>Terminal Demo (Live)</h2>
    <div class="terminal" id="term-demo-wrap"><div id="term-demo"></div></div>
    <div id="term-demo-caption" style="color:#6adaae;font-size:0.97em;margin-top:8px;opacity:0.75;"></div>
  </section>
  <footer>Â© 2025 Onii CLI â€” Built by Oniisama | <a href="https://github.com/89-oniichan">GitHub</a></footer>
  <script>
    function copyStep(num) {
      let cmds = {
        quick: 'curl -sL https://onii-cli.oniisama.com/install.sh | bash',
        1: 'echo "deb [trusted=yes] https://onii-cli.oniisama.com/repo/ ./" > $PREFIX/etc/apt/sources.list.d/oniis-cli.list',
        2: 'apt update',
        3: 'pkg install oniis-cli'
      };
      navigator.clipboard.writeText(cmds[num]);
      alert('Copied!');
    }
    // Automated terminal demo cycling all requested scenarios only using correct oniis/bulk-link commands
    const scenarios = [
      {
        caption: 'Manual Setup: Add Repo & Install Onii CLI',
        commands: [
          {prompt:true, text:'echo "deb [trusted=yes] https://onii-cli.oniisama.com/repo/ ./" > $PREFIX/etc/apt/sources.list.d/oniis-cli.list', color:'terminal-cmd'},
          {prompt:true, text:'apt update', color:'terminal-cmd'},
          {prompt:false, text:'Get:1 https://onii-cli.oniisama.com/repo ./ ...', color:'terminal-gray'},
          {prompt:false, text:'Hit:1 https://packages.termux.dev/termux-main stable Release', color:'terminal-gray'},
          {prompt:false, text:'Reading package lists... Done', color:'terminal-gray'},
          {prompt:true, text:'pkg install oniis-cli', color:'terminal-cmd'},
          {prompt:false, text:'The following NEW packages will be installed: oniis-cli', color:'terminal-gray'},
          {prompt:false, text:'Setting up oniis-cli (1.2.0) ...', color:'terminal-gray'},
          {prompt:false, text:'', color:''},
          {prompt:false, text:'âœ… Onii CLI is ready to use!', color:'terminal-green'}
        ]
      },
      {
        caption: 'oniis: Usage and Features Overview',
        commands: [
          {prompt:true, text:'oniis -h', color:'terminal-cmd'},
          {prompt:false, text:'Usage:', color:'terminal-cmd'},
          {prompt:false, text:'oniis [options] [query]', color:'terminal-gray'},
          {prompt:false, text:'Options:', color:'terminal-cmd'},
          {prompt:false, text:'  -e, --episode       Select episode or range', color:'terminal-gray'},
          {prompt:false, text:'  --link             Output anime video link(s)', color:'terminal-gray'},
          {prompt:false, text:'  -B, --bulk-links   Generate bulk episode links', color:'terminal-gray'},
          {prompt:false, text:'  -q, --quality      Specify quality (e.g. 720p)', color:'terminal-gray'},
          {prompt:false, text:'  -o, --output       Output to text file', color:'terminal-gray'},
          {prompt:false, text:'  -h, --help         Show help message', color:'terminal-gray'},
          {prompt:false, text:'Example: oniis -B -e 1-12 "blue lock"', color:'terminal-green'}
        ]
      },
      {
        caption: 'Fetch Stream Link: oniis "jujutsu kaisen" -e 1 --link',
        commands: [
          {prompt:true, text:'oniis "jujutsu kaisen" -e 1 --link', color:'terminal-cmd'},
          {prompt:false, text:'Checking dependencies...', color:'terminal-gray'},
          {prompt:false, text:'Search anime: jujutsu kaisen', color:'terminal-gray'},
          {prompt:false, text:'1  Jujutsu Kaisen (24 episodes)', color:'terminal-green'},
          {prompt:false, text:'Select episode: 1', color:'terminal-gray'},
          {prompt:false, text:'Stream URL for Episode 1:', color:'terminal-cmd'},
          {prompt:false, text:'https://cdn1.onii/anime/jujutsu/ep1.m3u8', color:'terminal-green'}
        ]
      },
      {
        caption: 'Bulk-link: Interactive Bulk Downloader',
        commands: [
          {prompt:true, text:'bulk-link', color:'terminal-cmd'},
          {prompt:false, text:'Anime: Demon Slayer', color:'terminal-gray'},
          {prompt:false, text:'Episodes: 1-3', color:'terminal-gray'},
          {prompt:false, text:'Quality: 1080p', color:'terminal-gray'},
          {prompt:false, text:'Output: demon_slayer_1-3.txt', color:'terminal-gray'},
          {prompt:false, text:'ðŸŽ¬ Fetching episode links...', color:'terminal-gray'},
          {prompt:false, text:'episode 1: https://dl.server/demon_slayer/ep1.m3u8', color:'terminal-green'},
          {prompt:false, text:'episode 2: https://dl.server/demon_slayer/ep2.m3u8', color:'terminal-green'},
          {prompt:false, text:'episode 3: https://dl.server/demon_slayer/ep3.m3u8', color:'terminal-green'},
          {prompt:false, text:'âœ… Links saved to: demon_slayer_1-3.txt', color:'terminal-green'}
        ]
      },
      {
        caption: 'Quick Install: bash install.sh (recommended for most)',
        commands: [
          {prompt:true, text:'bash install.sh', color:'terminal-cmd'},
          {prompt:false, text:'==========================================', color:'terminal-gray'},
          {prompt:false, text:'          Oniis CLI Installer', color:'terminal-green'},
          {prompt:false, text:'==========================================\n', color:'terminal-gray'},
          {prompt:false, text:'ðŸ”§ Adding Oniis CLI repository...', color:'terminal-gray'},
          {prompt:false, text:'ðŸ“¦ Updating package lists...', color:'terminal-gray'},
          {prompt:false, text:'Get:1 https://onii-cli.oniisama.com/repo ./ oniis-cli ...', color:'terminal-gray'},
          {prompt:false, text:'ðŸš€ Installing Oniis CLI...', color:'terminal-gray'},
          {prompt:false, text:'Selecting previously unselected package oniis-cli.', color:'terminal-gray'},
          {prompt:false, text:'Preparing to unpack oniis-cli_1.2.0.deb ...', color:'terminal-gray'},
          {prompt:false, text:'Unpacking oniis-cli (1.2.0) ...', color:'terminal-gray'},
          {prompt:false, text:'Setting up oniis-cli (1.2.0) ...', color:'terminal-gray'},
          {prompt:false, text:'', color:''},
          {prompt:false, text:'âœ… Oniis CLI installed successfully!', color:'terminal-green'}
        ]
      },
      {
        caption: 'oniis --version',
        commands: [
          {prompt:true, text:'oniis --version', color:'terminal-cmd'},
          {prompt:false, text:'1.0.0', color:'terminal-green'}
        ]
      }
    ];
    let demoCurrent = 0, demoLine = 0, demoChar = 0;
    function renderDemoLines(showCursor = true) {
      const box = document.getElementById('term-demo');
      let lines = [];
      for (let i = 0; i < demoLine; ++i) {
        const line = scenarios[demoCurrent].commands[i];
        let pfx = line.prompt ? '<span style="color:#666;">$</span> ' : '';
        lines.push('<span class="'+line.color+'">'+pfx+line.text+'</span>');
      }
      if (demoLine < scenarios[demoCurrent].commands.length) {
        let line = scenarios[demoCurrent].commands[demoLine];
        let pfx = line.prompt ? '<span style="color:#666;">$</span> ' : '';
        let txt = line.text.slice(0, demoChar);
        lines.push('<span class="'+line.color+'">'+pfx+txt+(showCursor ? '<span class="cursor"></span>' : '')+'</span>');
      } else if (showCursor) {
        lines.push('<span class="cursor"></span>');
      }
      box.innerHTML = lines.join('<br>');
      document.getElementById('term-demo-caption').textContent = scenarios[demoCurrent].caption;
    }
    function typeDemo() {
      let scenario = scenarios[demoCurrent];
      if (!scenario || !scenario.commands || !scenario.commands.length) {
        demoCurrent = (demoCurrent + 1) % scenarios.length;
        demoLine = 0; demoChar = 0;
        setTimeout(typeDemo, 120);
        return;
      }
      let curCmds = scenario.commands;
      if (demoLine >= curCmds.length) {
        renderDemoLines(true);
        setTimeout(() => {
          demoCurrent = (demoCurrent + 1) % scenarios.length;
          demoLine = 0; demoChar = 0;
          typeDemo();
        }, 420);
        return;
      }
      renderDemoLines(true);
      let thisLine = curCmds[demoLine];
      if (demoChar < thisLine.text.length) {
        demoChar++;
        setTimeout(typeDemo, thisLine.prompt ? 16 : 10);
      } else {
        demoLine++;
        demoChar = 0;
        setTimeout(typeDemo, 48);
      }
    }
    document.addEventListener('visibilitychange', function() { setTimeout(typeDemo, 10); });
    document.addEventListener('DOMContentLoaded', function() { typeDemo(); });
  </script>
</body>
</html>

